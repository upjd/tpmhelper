<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
<script src="/js/index.js"></script>

<title data-react-helmet="true">安全作业模板 | rockwelltpm</title>

<meta data-react-helmet="true" name="docsearch:version" content="4.0.2"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="安全作业模板 | rockwelltpm"><meta data-react-helmet="true" name="description" content="实现8大安全作业的定点，定人，定时，违规操作报警。"><meta data-react-helmet="true" property="og:description" content="实现8大安全作业的定点，定人，定时，违规操作报警。"><meta data-react-helmet="true" property="og:url" content="https://upjd.github.io//docs/系统配置手册/模板详细说明/安全作业模板">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.291008dc.css">


<link rel="preload" href="/styles.e9064f25.js" as="script">

<link rel="preload" href="/runtime~main.0d865bc6.js" as="script">

<link rel="preload" href="/main.c2470f52.js" as="script">

<link rel="preload" href="/1.1e5ad6df.js" as="script">

<link rel="preload" href="/2.9c54e79d.js" as="script">

<link rel="preload" href="/3.dce460c9.js" as="script">

<link rel="preload" href="/1be78505.18c485a8.js" as="script">

<link rel="preload" href="/20ac7829.6114259a.js" as="script">

<link rel="preload" href="/17896441.96eb31fc.js" as="script">

<link rel="preload" href="/aeabd683.52f805bd.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="rockwelltpm Logo"><strong class="navbar__title">rockwelltpm</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/简介/概述">文档</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/简介/概述">开发中（待发布）</a></li><li><a class="dropdown__link" href="/docs/简介/概述">4.0.2（最新版）</a></li><li><a class="dropdown__link" href="/docs/4.0.0/简介/概述">4.0.0</a></li><li><a class="dropdown__link" href="/docs/3.8.2/简介/概述">3.8.2</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/发布说明/发布记录">发布记录</a><a target="_blank" rel="noopener noreferrer" href="https://www.rockwellautomation.com.cn/" class="navbar__item navbar__link">罗克韦尔官网</a><a target="_blank" rel="noopener noreferrer" href="https://www.rockwellautomation.com.cn/support.html" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="rockwelltpm Logo"><strong class="navbar__title">rockwelltpm</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" position="left" href="/docs/简介/概述">文档</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/简介/概述">开发中（待发布）</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/简介/概述">4.0.2（最新版）</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/4.0.0/简介/概述">4.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/3.8.2/简介/概述">3.8.2</a></li></ul></li><li class="menu__list-item"><a class="menu__link" position="left" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" position="right" href="/docs/发布说明/发布记录">发布记录</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://www.rockwellautomation.com.cn/" class="menu__link" position="right">罗克韦尔官网</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://www.rockwellautomation.com.cn/support.html" class="menu__link header-github-link" position="right" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">简介</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/简介/概述">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/简介/优势">优势</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/简介/应用场景">应用场景</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">安装</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/安装/系统要求">系统要求</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/安装/安装">安装</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/安装/安装SQLServer">安装SQLServer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/安装/安装PostgresSQL">安装PostgresSQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/安装/安装MongoDB">安装MongoDB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/安装/安装RabbitMQ">安装RabbitMQ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">用户使用手册</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">网页端</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/登录">登录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/自定义主页">自定义主页</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/管理导航栏">管理导航栏</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/项目">项目</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/计划">计划</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/任务">任务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/审核">审核</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/作业树">作业树</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/报表">报表</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/库存">库存</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/分析">分析</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/日志">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/知识库">知识库</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/消息中心">消息中心</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/地图">地图</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/资产总览">资产总览</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/人员总览">人员总览</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/排班表">排班表</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">用户</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/用户信息">用户信息</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/修改密码">修改密码</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/个性设置">个性设置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/消息订阅">消息订阅</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/系统日志">系统日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/下载终端应用">下载终端应用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/注销">注销</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">配置</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/日志主题">日志主题</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/资源">资源</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/资产位置">资产位置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/作业组模板">作业组模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/子项模板">子项模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/库存导入">库存导入</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/画面">画面</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/作业组维护">作业组维护</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/系统扩展管理">系统扩展管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/消息类型管理">消息类型管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/权限设置">权限设置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/网站设置">网站设置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/自定义导航">自定义导航</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/网页端/消息订阅管理">消息订阅管理</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">终端</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/登录">登录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/配置">配置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/同步">同步</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/主页">主页</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/执行">执行</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/审核">审核</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/日志">日志</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/用户使用手册/终端/消息">消息</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">系统配置手册</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/授权管理/授权管理">授权管理</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">系统设置</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/系统设置/服务/服务">服务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/系统设置/系统参数/系统参数">系统参数</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/账户设置/账户设置">账户设置</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/数据库管理/数据库管理">数据库管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/解决方案管理/解决方案管理">解决方案管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/部署模型管理/部署模型管理">部署模型管理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/解决方案设置/解决方案设置">解决方案设置</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">列表管理器</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/概述">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/自定义列表">自定义列表</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/附件">附件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/工程单位">工程单位</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/例外等级">例外等级</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/全局属性模板">全局属性模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/轮班">轮班</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/资产类别">资产类别</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/列表管理器/资产">资产</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">组织架构管理器</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/组织架构管理器/概述">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/组织架构管理器/业务范畴">业务范畴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/组织架构管理器/岗位">岗位</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/组织架构管理器/组织单元">组织单元</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/组织架构管理器/用户">用户</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/流程管理器/流程管理器">流程管理器</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">作业管理器</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/概述">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/项目模板">项目模板</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">作业规范</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业规范概述">作业规范概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业规范">作业规范</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业规范下作业">作业规范下作业</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业规范下作业项">作业规范下作业项</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">作业组</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业组概述">作业组概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业组">作业组</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业组下作业">作业组下作业</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统配置手册/作业管理器/作业组下作业项">作业组下作业项</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/内置流程后和终端函数">内置流程后和终端函数</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">模板详细说明</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/模板详细说明/概述">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/模板详细说明/基础模板">基础模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/模板详细说明/巡检和维修作业模板">巡检和维修作业模板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/系统配置手册/模板详细说明/设备管理模板">设备管理模板</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/docs/系统配置手册/模板详细说明/安全作业模板">安全作业模板</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">系统维护指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统维护指南/运行监控和维护">运行监控和维护</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统维护指南/数据备份和还原">数据备份和还原</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">系统扩展指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/主页定制扩展开发">主页定制扩展开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/流程后函数扩展开发">流程后函数扩展开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/报表扩展开发">报表扩展开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/分析扩展开发">分析扩展开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/终端页面扩展开发">终端页面扩展开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/扩展例子">扩展例子</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/与自控系统集成例子">与自控系统集成例子</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/社交平台集成示例-作业任务钉钉推送">社交平台集成示例-作业任务钉钉推送</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/资产属性终端自定义查询">资产属性终端自定义查询</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/nodejs程序配置成windows服务">nodejs程序配置成windows服务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/系统扩展指南/RabbitMQ开发说明">RabbitMQ开发说明</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">发布说明</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/发布说明/发布记录">发布记录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/发布说明/3.8.1发布说明">3.8.1发布说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/发布说明/3.8.2发布说明">3.8.2发布说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/发布说明/4.0.0发布说明">4.0.0发布说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/发布说明/4.0.1发布说明">4.0.1发布说明</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/发布说明/4.0.2发布说明">4.0.2发布说明</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">附录</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/软件和应用升级">软件和应用升级</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/大屏配置和使用">大屏配置和使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/作业树模板配置和使用">作业树模板配置和使用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/使用条码标签">使用条码标签</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/使用RFID或NFC标签">使用RFID或NFC标签</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/使用超高频标签">使用超高频标签</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/使用AIC8600测温测振设备">使用AIC8600测温测振设备</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/使用AR智能眼镜和远程指导">使用AR智能眼镜和远程指导</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/使用钛准定位">使用钛准定位</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/附录/常见问题">常见问题</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><div><span class="badge badge--secondary">Version: 4.0.2</span></div><header><h1 class="docTitle_1vWb">安全作业模板</h1></header><div class="markdown"><p>实现8大安全作业的定点，定人，定时，违规操作报警。</p><p>具体功能实现：</p><ul><li><p>可绘制的作业范围-围栏。</p></li><li><p>终端定位作业人员，保证人员在指定范围作业。</p></li><li><p>对于需要气体检测的作业，第一次检查不是完全安全范围的，每半小时创建一个检测作业组，中途暂停作业超过1h的，也会创建检测作业组，要求人员去现场检测。</p></li><li><p>对于监护人员离场，无关人员闯入围栏范围，围栏范围人员过多，作业超时都能及时报警。</p></li><li><p>规范安全作业流程，减少作业事故发生，提高企业效益。</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>1.需要和钛准定位系统结合使用，2.需要自定义服务程序启动，3.需要与钛准系统的接口程序服务启动。</p></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="流程"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#流程" title="Direct link to heading">#</a>流程</h2><ul><li><p>申请动火-&gt;审核-&gt;现场落实安全措施，气体检测，监护人到位-&gt;领导签名-&gt;开始动火-&gt;验收结束</p><img alt=" " src="/docimg/动火流程.png"></li><li><p>其中<em>动火计划申请</em>和<em>作业申请审核</em>主要是EOC审核，主要是对一些作业组属性进行操作。
<em>落实安全措施</em>、<em>监火人签名</em>、<em>审批签名</em>、<em>一级签名</em>、<em>安全作业</em>都是分别是安全员，监护员，主管，经理，监护员在<em>现场</em>操作。</p><p> :::warning 注意
审核签名活动名称不能更改，在这个活动时才会判断是否创建气体检测作业
:::warning 注意</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="作业"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#作业" title="Direct link to heading">#</a>作业</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="落实安全措施"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#落实安全措施" title="Direct link to heading">#</a>落实安全措施</h3><ul><li><p><a href="#dhaqcs">详见作业规范-动火安全措施</a>。</p></li><li><span id="qm">安全措施落实人签名</span>* 这里主要就是确定作业人是到围栏范围内落实安全措施了。所以有个查询此人是否在围栏范围的脚本。</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var baseUrl = &#x27;http://&#x27; + GlobalInfo.GetSyncServer() + &#x27;:8011&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var buildId = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;buildId&#x27;) ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 查询人员</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var IsInRail = function(_name, _rail, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $.ajax({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      url: baseUrl + &#x27;/IsInRail?name=&#x27; + _name + &#x27;&amp;rail=&#x27; + _rail,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type: &#x27;get&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dataType: &#x27;json&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      timeout: 1500,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data: JSON.stringify({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;buildId&#x27;:buildId,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;railName&#x27;:_rail,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;name&#x27;:_name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      success: function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(res &amp;&amp; res.IsOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res.Response);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            Common.ShowDebug(JSON.stringify(res));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      error: function(XMLHttpRequest, textStatus, errorThrown){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Common.ShowDebug(errorThrown + XMLHttpRequest.responseText);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        _callback();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var user = GlobalInfo.GetLoginUser();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var rail = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业详细地点&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IsInRail(user.Name,rail,function(isIn){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(isIn){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        alert(&#x27;登陆人&#x27;+ user.Name +&#x27;不在围栏内，请到达作业围栏范围内再执行作业。&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">如果查询登陆人不在范围内返回true。</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var task = ScriptEngine.Context.GetTaskByID(contextID);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskAttributeValue(task.ID,&#x27;Value&#x27;,&#x27;&#x27;) ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskAttributeValue(task.ID,&#x27;Status&#x27;,JobStatus.New) ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">将作业项状态修改为未完成状态。</span></div></div></div></div></div><ul><li><p>结合下面作业项配置就可以做到安全员不在规定围栏范围，完成不了此项作业。</p><img alt=" " src="/docimg/必须完成.png"></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="检测人员检测"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#检测人员检测" title="Direct link to heading">#</a>检测人员检测</h3><ul><li><p><a href="#qtjc">详见作业规范-气体检测</a>。</p></li><li><p>检测人员签名</p><ul><li>同<a href="#qm">安全措施落实人签名</a>。</li></ul></li><li><span id="zjcjg">总检测结果</span>* 将作业*检测人员检测*下所有作业项*检测结果*的值拿出来归类。只要有一次不合格则返回不合格，没有不合格有合格则返回合格，全部为安全才返回安全。</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var context = ScriptEngine.Context;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var task0 = context.GetTaskByID(contextID);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var parent = context.GetParentTask(task0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function getTasks(_parent, _name){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var tasks = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var getOne = function(_task){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(_task &amp;&amp; _task.ID){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            var children= context.GetChildTasks(_task.ID);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(children &amp;&amp; children.length &gt; 0){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                for(var i=0;i &lt; children.length; i++){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    if(children[i] &amp;&amp; children[i].Name &amp;&amp; children[i].Name === _name){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        tasks.push(children[i]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    getOne(children[i]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    getOne(_parent);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return tasks;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var tasks = getTasks(parent,&#x27;检测结果&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var res = @CustomList.检测结果.安全 ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tasks.forEach(function(_task){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var value = ScriptEngine.Context.GetTaskAttributeValue(_task.ID, &#x27;Value&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(value === &#x27;&#x27; || value === @CustomList.检测结果.不合格 ){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        res = @CustomList.检测结果.不合格 ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else if(value === @CustomList.检测结果.合格 &amp;&amp; res === @CustomList.检测结果.安全 ){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        res = value ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return res;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskGroupPropertyValue(&#x27;检测结果&#x27;,@Me.Value );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">将作业项的值更新到作业组属性*检测结果*。</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var userName = &#x27;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var user = GlobalInfo.GetLoginUser();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(user)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">userName =user.Name  ; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskGroupPropertyValue(&#x27;检测人员&#x27;,userName) ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return  true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">将登陆人的显示名更新到作业组属性*检测人员*。</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="添加作业人员"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#添加作业人员" title="Direct link to heading">#</a>添加作业人员</h3><ul><li><a href="#zyry">详见作业规范-动作业人员</a>。</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="运行监护人签名"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#运行监护人签名" title="Direct link to heading">#</a>运行监护人签名</h3><ul><li>同<a href="#qm">安全措施落实人签名</a>。</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="审批签名"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#审批签名" title="Direct link to heading">#</a>审批签名</h3><ul><li><p>审批人签名</p><ul><li>同<a href="#qm">安全措施落实人签名</a>。</li></ul></li><li><span id="yjlw">加监护人至越界例外</span>* 将监护人员、作业人员添加到*越界例外*名单中去，这样这些人穿过围栏进入围栏就不会报警，不在这个名称范围内的任何人穿越都会报警。</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 将属性名对应的人添加到此作业项指定的报警人员中</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var propertyName = &#x27;运行监护人&#x27; ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var type = @Me.Value.DisplayName ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var baseUrl = &#x27;http://&#x27; + GlobalInfo.GetSyncServer() + &#x27;:8011&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 查询人员</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var getMacByName = function(_name, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $.ajax({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      url: baseUrl + &#x27;/GetMacByName?name=&#x27; + _name,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type: &#x27;get&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dataType: &#x27;json&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data: &#x27;&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      success: function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(res &amp;&amp; res.IsOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res.Response);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(res){ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Common.ShowDebug(res.ErrorMsg);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      error: function(XMLHttpRequest, textStatus, errorThrown){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Common.ShowDebug(errorThrown + XMLHttpRequest.responseText);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var workers = ScriptEngine.Context.GetTaskGroupPropertyValue(type);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(workers){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = JSON.parse(workers);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var name = ScriptEngine.Context.GetTaskGroupPropertyValue(propertyName);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">getMacByName(name,function(mac){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(mac){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var isIn = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        for(var i = 0; i &lt; workers.length; i++){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(workers[i][&#x27;胸牌ID&#x27;] === mac){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                isIn = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(isIn){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            //alert(&#x27;用户【&#x27;+name+&#x27;】已在【&#x27; + type + &#x27;】中登记，不可重复&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        workers.push({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &#x27;姓名&#x27;: name,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &#x27;胸牌ID&#x27;: mac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine.Context.SetTaskGroupPropertyValue(type ,JSON.stringify(workers));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 将作业人员指定的报警人员中（格式相同）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var propertyName = &#x27;作业人员&#x27; ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var type = &#x27;越界例外人员&#x27; ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var workers = ScriptEngine.Context.GetTaskGroupPropertyValue(type);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(workers){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = JSON.parse(workers);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var users = ScriptEngine.Context.GetTaskGroupPropertyValue(propertyName);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(users){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    users = JSON.parse(users);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    _.each(users, function(user){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var find = _.find(workers, function(worker){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return worker[&#x27;胸牌ID&#x27;] === user[&#x27;胸牌ID&#x27;];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(!find)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            workers.push(user);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ScriptEngine.Context.SetTaskGroupPropertyValue(type ,JSON.stringify(workers));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return true;</span></div></div></div></div></div><ul><li><p>加作业负责人至越界例外</p><ul><li>同<a href="#yjlw">加监护人至越界例外</a>。</li></ul></li><li><p>加检测人员至越界例外</p><ul><li>同<a href="#yjlw">加监护人至越界例外</a>。</li></ul></li><li><p>设置报警</p><ul><li>返回true代表和钛准定位系统联通，系统所有的报警设置能够有效。</li></ul></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var curTaskGroup = ScriptEngine.Context.GetCurTaskGroup();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var baseUrl = &#x27;http://&#x27; + GlobalInfo.GetSyncServer() + &#x27;:8011&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 查询人员</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var setAlarm = function(_taskGroupID, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $.ajax({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      url: baseUrl + &#x27;/SetAlarm&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type: &#x27;post&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dataType: &#x27;json&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data: JSON.stringify({&#x27;taskGroupID&#x27;:_taskGroupID}),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      success: function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(res &amp;&amp; res.IsOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res.Response);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(res){ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Common.ShowDebug(res.ErrorMsg);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      error: function(XMLHttpRequest, textStatus, errorThrown){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Common.ShowDebug(errorThrown + XMLHttpRequest.responseText);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">setAlarm(curTaskGroup.ID,function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        alert(&#x27;设置报警成功！&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="特殊动火会签"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#特殊动火会签" title="Direct link to heading">#</a>特殊动火会签</h3><ul><li>同<a href="#qm">安全措施落实人签名</a>。</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="动火"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#动火" title="Direct link to heading">#</a>动火</h3><ul><li>详见<a href="#dhzygf">作业规范-安全作业规范</a>。  </li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="验收"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#验收" title="Direct link to heading">#</a>验收</h3><ul><li><p>详见<a href="#ysgf">作业规范-验收规范</a>。</p></li><li><p>监护人签字</p><ul><li>同<a href="#qm">安全措施落实人签名</a>。</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="作业规范"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#作业规范" title="Direct link to heading">#</a>作业规范</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="动火安全措施"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#动火安全措施" title="Direct link to heading">#</a><span id="dhaqcs">动火安全措施</span></h3><ul><li>作业项的检查内容是依据客户原有纸质表格配置出来的。</li><li>添加监火人至离开关注</li><li>监护人离开围栏范围一定时间后系统报警配置。</li><li>同<a href="#yjlw">加监护人至越界例外</a>。</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="单类气体分析检测"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#单类气体分析检测" title="Direct link to heading">#</a><span id="qtjc">单类气体分析检测</span></h3><ul><li><p>主要是记录位置，气体类型，何种气体，含量以及是否合格。</p></li><li><p>这里可以重复创建本规范。</p></li><li><p>是否还有其他检测气体</p><img alt=" " src="/docimg/气体检测.png"></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="作业人员"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#作业人员" title="Direct link to heading">#</a><span id="zyry">作业人员</span></h3><ul><li><p>扫描胸牌</p><img alt=" " src="/docimg/胸牌.png"><ul><li>扫描动火人员的胸牌上二维码，系统会去查询此码的人员姓名，并将其更新到作业组属性<em>作业人员</em>。</li></ul></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var mac = @Me.Value ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var baseUrl = &#x27;http://&#x27; + GlobalInfo.GetSyncServer() + &#x27;:8011&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 查询人员</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var getUserByMac = function(_mac, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $.ajax({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      url: baseUrl + &#x27;/GetLocationUserByMac?mac=&#x27; + _mac,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type: &#x27;get&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dataType: &#x27;json&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data: &#x27;&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      success: function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(res &amp;&amp; res.IsOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res.Response);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(res){ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Common.ShowDebug(res.ErrorMsg);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      error: function(XMLHttpRequest, textStatus, errorThrown){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Common.ShowDebug(errorThrown + XMLHttpRequest.responseText);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        _callback();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var workers = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业人员&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(workers){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = JSON.parse(workers);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">getUserByMac(mac,function(user){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(user){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var isSure = confirm(&#x27;用户名：&#x27; + user.name + &#x27;  类型：&#x27; + user.type);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(user &amp;&amp; isSure){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            var isIn = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            for(var i = 0; i &lt; workers.length; i++){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                if(workers[i][&#x27;胸牌ID&#x27;] === user.mac){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    isIn = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(isIn){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                alert(&#x27;用户【&#x27;+user.name+&#x27;】已登记，不可重复&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            workers.push({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;姓名&#x27;: user.name,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;胸牌ID&#x27;: user.mac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine.Context.SetTaskGroupPropertyValue(&#x27;作业人员&#x27;,JSON.stringify(workers));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="还有作业人员吗"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#还有作业人员吗" title="Direct link to heading">#</a><span id="hyzyry">还有作业人员吗</span></h3><ul><li>重复创建此规范，可扫描多次动火人员。将作业人员信息更新到作业组属性<em>多组报警</em>中。</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var alarmArray = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;多组报警&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(alarmArray){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    alarmArray = JSON.parse(alarmArray);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    alarmArray = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var workers = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业人员&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(workers){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = JSON.parse(workers);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workers = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var count = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业人员数&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(count){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    count = Number(count);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    count = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var res = {};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">res[&#x27;Macs&#x27;] = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">res[&#x27;Count&#x27;] = count;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">res[&#x27;Type&#x27;] = &#x27;作业人员&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">workers.forEach(function(_worker){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    res[&#x27;Macs&#x27;].push(_worker[&#x27;胸牌ID&#x27;]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">alarmArray = alarmArray.concat(res);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskGroupPropertyValue(&#x27;多组报警&#x27;, JSON.stringify(alarmArray));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return true;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var p = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业人员&#x27;) ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var context = ScriptEngine.Context;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var value = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业人员&#x27;) ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var cost = &#x27;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (value &amp;&amp; value != &#x27;&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var jObj = JSON.parse(value);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (jObj &amp;&amp; jObj.length &gt; 0) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        _.each(jObj, function(_item) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if (_item[&#x27;姓名&#x27;]){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                cost +=_item[&#x27;姓名&#x27;] + &#x27;:&#x27;+ _item[&#x27;胸牌ID&#x27;] +&#x27;;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskGroupPropertyValue(&#x27;作业人员信息&#x27;,cost ) ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return cost ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">将作业组属性*作业人员*中姓名累加更新到作业组属性*作业人员信息*。</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="安全作业规范"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#安全作业规范" title="Direct link to heading">#</a><span id="dhzygf">安全作业规范</span></h3><ul><li>是否暂停<ul><li>动火过程中可能需要暂停工作一段时间，当需要暂停时就可以选择<em>√</em>，系统会将此作业组暂停，报警终止。</li></ul></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var me = @Me.Value ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var baseUrl = &#x27;http://&#x27; + GlobalInfo.GetSyncServer() + &#x27;:8011&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var isPause = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(me === @CustomList.√/×.√ ) isPause = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 暂停作业</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var PauseAlarm = function(_jobID, _isPause, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $.ajax({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      url: baseUrl + &#x27;/PauseAlarm&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type: &#x27;post&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dataType: &#x27;json&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data: JSON.stringify({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &#x27;JobID&#x27;: _jobID,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &#x27;IsPause&#x27;: _isPause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      success: function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(res &amp;&amp; res.IsOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res.Response);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(res){ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Common.ShowDebug(res.ErrorMsg);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      error: function(XMLHttpRequest, textStatus, errorThrown){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Common.ShowDebug(errorThrown + XMLHttpRequest.responseText);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var curTaskGroup = ScriptEngine.Context.GetCurTaskGroup();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(isPause){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PauseAlarm(curTaskGroup.ID,isPause,function(isOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(isOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">暂停成功返回true。</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var task = ScriptEngine.Context.GetTaskByID(contextID);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var parent = ScriptEngine.Context.GetParentTask(task);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var taskItem = ScriptEngine.Context.GetTaskByNameAndParent(&#x27;作业&#x27;,parent.ID);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskAttributeValue(taskItem.ID,&#x27;AssetID&#x27;,&#x27;9c39d6bc-e075-4b85-8e55-17a9e39f8eac&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">alert(&#x27;暂停成功。&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">选择暂停后将作业规范下作业*作业*修改为不可执行状态。</span></div></div></div></div></div><ul><li><p>是否恢复作业</p><ul><li>暂停过后，如果开始作业了，选择<em>√</em>，系统又开始报警。如果中间休息超过<strong>1H</strong>，则创建作业组<em>暂停后气体检测作业</em>。</li></ul><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>创建作业组必须和自定义服务一起使用。</p></div></div></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var baseUrl = &#x27;http://&#x27; + GlobalInfo.GetSyncServer() + &#x27;:8011&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 创建气体检测</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var CreateTest = function(_taskGroupID, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $.ajax({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      url: baseUrl + &#x27;/CreateTest&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type: &#x27;post&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      dataType: &#x27;json&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      headers: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data: JSON.stringify({&#x27;TaskGroupID&#x27;:_taskGroupID}),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      success: function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(res &amp;&amp; res.IsOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res.Response);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(res){ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Common.ShowDebug(res.ErrorMsg);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      error: function(XMLHttpRequest, textStatus, errorThrown){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Common.ShowDebug(errorThrown + XMLHttpRequest.responseText);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var pause = @暂停.TimeStamp ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var now = new Date();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//超过1小时</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(now.getTime() - pause.getTime() &gt; 3600 * 1000){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var tg = ScriptEngine.Context.GetCurTaskGroup();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    CreateTest(tg.ID,function(isOk){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(isOk)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var task = ScriptEngine.Context.GetTaskByID(contextID);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var parent = ScriptEngine.Context.GetParentTask(task);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var taskItem = ScriptEngine.Context.GetTaskByNameAndParent(&#x27;作业&#x27;,parent.ID);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskAttributeValue(taskItem.ID,&#x27;AssetID&#x27;,&#x27;00000000-0000-0000-0000-000000000000&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return &#x27;恢复成功&#x27; ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">将作业规范下作业*作业*修改为可执行状态。</span></div></div></div></div></div><ul><li>安全作业完成了吗<ul><li>同<a href="#qm">安全措施落实人签名</a>。回答问题时一定要处于规定围栏范围内。</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="验收规范"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#验收规范" title="Direct link to heading">#</a><span id="ysgf">验收规范</span></h3><ul><li>安装客户需求配置检查项即可。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="作业组属性"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#作业组属性" title="Direct link to heading">#</a>作业组属性</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="基本信息"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#基本信息" title="Direct link to heading">#</a>基本信息</h3><img alt=" " src="/docimg/作业组属性-基本信息.png"><ul><li>作业内容<ul><li>由申请人填写一些基本信息。</li></ul></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 修改作业组属性*作业票号*为年月日时分秒。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var ticketNo = Commons.GetSystemDateTime(&#x27;yyyy-MM-dd hh:mm:ss&#x27;).substring(2).replace(/-/g,&#x27;&#x27;).replace(/\s/g,&#x27;&#x27;).replace(/:/g,&#x27;&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.Context.SetTaskGroupPropertyValue(&#x27;作业票号&#x27;,ticketNo);</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var userID = this.parent.USERID;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.GetAjaxToApiServer(&#x27;UserConfig&#x27;,&#x27;GetByID&#x27;,&#x27;id=&#x27; + userID,&#x27;get&#x27;,&#x27;&#x27;,function(user){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(user){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine.Context.SetTaskGroupPropertyValue(&#x27;申请人&#x27;,user.Name);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine.GetAjaxToApiServer(&#x27;UserConfig&#x27;,&#x27;GetRoles&#x27;,&#x27;userID=&#x27; + userID,&#x27;get&#x27;,&#x27;&#x27;,function(roles){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if(roles){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                if(roles.length &gt; 0){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ScriptEngine[resultName] = true;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = false;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">修改申请人为当前登陆人的用户名。</span></div></div></div></div></div><ul><li>作业详细地点<ul><li>申请人确定作业范围-画围栏。</li></ul></li></ul><img alt=" " src="/docimg/画围栏.png"><p><code>http://111.59.194.26:8085/implant/DrawPoints.html?username=client&amp;secret=fdbc79d7a4b94f80b8c2d8aa2ea03a0e&amp;buildId=200812&amp;tokenID=IMTOKENID&amp;locationId=IMVALUE
（这是钛准定位的画围栏地址）</code></p><ul><li><p>作业票号</p><ul><li>作业内容填写完成后更新。</li></ul></li><li><p>作业点归属单位  </p></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 得到“XX公司”列表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var parentID = &#x27;67244b22-de4c-42c1-aba0-10bba9f2577e&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.GetAjaxToApiServer(&#x27;OrgUnit&#x27;,&#x27;GetChildren&#x27;,&#x27;parentID=&#x27; + parentID,&#x27;&#x27;,&#x27;get&#x27;,function(orgUnits){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(orgUnits){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = orgUnits;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*67244b22-de4c-42c1-aba0-10bba9f2577e*为组织单元*XX公司*的ID号。</span></div></div></div></div></div><ul><li><p>作业人员数</p><ul><li>预计的可能动火人员数。</li></ul></li><li><p>作业人员</p><ul><li>作业项脚本更新。详见<a href="#zyry">作业规范-作业人员</a>。</li></ul></li><li><p>作业负责人</p><ul><li>在组织单元为作业组属性<em>作业点归属单位</em>，岗位为车间主任的所有人员中选择。</li></ul></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 过滤出特定岗位ID是的用户</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function UserFilter(_users, _postID, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var res = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    function getOne(_index){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(_index &gt;= _users.length){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine.GetAjaxToApiServer(&#x27;UserConfig&#x27;,&#x27;GetRoles&#x27;,&#x27;userID=&#x27; + _users[_index].ID,&#x27;&#x27;,&#x27;get&#x27;,function(roles){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                if(roles){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    let role = _.find(roles,function(item){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        return item.RelatedPost.ID === _postID;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    if(role)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        res.push(_users[_index]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    _index++;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    getOne(_index);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    _callback();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    getOne(0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 得到“作业单位”下的特定岗位的用户列表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//ScriptEngine.CheckTimes = 100 ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var orgUnitName = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业点归属单位&#x27;); //组织单元名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var postID = &#x27;4baadf33-e82c-4d52-a026-1e52a64fabb3&#x27;;    //岗位车间主任ID</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">try{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(orgUnitName){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ScriptEngine.GetAjaxToApiServer(&#x27;OrgUnit&#x27;,&#x27;GetByName&#x27;,&#x27;parentID=invalid&amp;name=&#x27; + orgUnitName,&#x27;&#x27;,&#x27;get&#x27;,function(orgUnit){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(orgUnit){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine.GetAjaxToApiServer(&#x27;UserConfig&#x27;,&#x27;GetByOrgUnitID&#x27;,&#x27;orgUnitID=&#x27; + orgUnit.ID,&#x27;&#x27;,&#x27;get&#x27;,function(users){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                if(users){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    UserFilter(users, postID, function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ScriptEngine[resultName] = res;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}catch(e){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    console.error(e);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div></div></div></div></div><ul><li>运行监护人<ul><li>在组织单元为作业组属性<em>作业点归属单位</em>，岗位为车间监护的所有人员中选择。</li></ul></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 过滤出特定岗位ID是的用户</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function UserFilter(_users, _postID, _callback){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var res = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    function getOne(_index){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(_index &gt;= _users.length){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _callback(res);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine.GetAjaxToApiServer(&#x27;UserConfig&#x27;,&#x27;GetRoles&#x27;,&#x27;userID=&#x27; + _users[_index].ID,&#x27;&#x27;,&#x27;get&#x27;,function(roles){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                if(roles){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    let role = _.find(roles,function(item){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        return item.RelatedPost.ID === _postID;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    if(role)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        res.push(_users[_index]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    _index++;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    getOne(_index);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                else{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    _callback();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    getOne(0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 得到“作业单位”下的特定岗位的用户列表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//ScriptEngine.CheckTimes = 100 ;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var orgUnitName = ScriptEngine.Context.GetTaskGroupPropertyValue(&#x27;作业点归属单位&#x27;); //组织单元名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var postID = &#x27;44a93fc7-91d8-4b9e-8f09-24fa7ed5f6fa&#x27;;    //岗位车间监护ID</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">try{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(orgUnitName){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ScriptEngine.GetAjaxToApiServer(&#x27;OrgUnit&#x27;,&#x27;GetByName&#x27;,&#x27;parentID=invalid&amp;name=&#x27; + orgUnitName,&#x27;&#x27;,&#x27;get&#x27;,function(orgUnit){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if(orgUnit){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ScriptEngine.GetAjaxToApiServer(&#x27;UserConfig&#x27;,&#x27;GetByOrgUnitID&#x27;,&#x27;orgUnitID=&#x27; + orgUnit.ID,&#x27;&#x27;,&#x27;get&#x27;,function(users){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                if(users){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    UserFilter(users, postID, function(res){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        ScriptEngine[resultName] = res;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}catch(e){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    console.error(e);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div></div></div></div></div><ul><li>落实安全措施人<ul><li>选择所有岗位为<em>安全专员</em>的人员列表。</li></ul></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 得到特定岗位的用户列表</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">console.log(this);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var resultName = ScriptEngine.GetResultName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var postID = &#x27;c79dc247-7d6b-4782-8c21-272855ff3e5c&#x27;;    //岗位安全专员ID</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ScriptEngine.GetAjaxToApiServer(&#x27;UserConfig&#x27;,&#x27;GetByPostID&#x27;,&#x27;postID=&#x27; + postID,&#x27;&#x27;,&#x27;get&#x27;,function(users){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ScriptEngine[resultName] = new Array();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(users){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ScriptEngine[resultName] = users;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return {&#x27;ResultName&#x27;:resultName};</span></div></div></div></div></div><ul><li><p>检测人员</p><ul><li>作业项脚本更新，<a href="#zjcjg">详情链接。</a></li></ul></li><li><p>作业等级</p><ul><li>申请后审核人员选择字符串列表。影响最终的现场审核，一级动火及以上是非常危险且严格，所以通常要上报总经理级别。</li></ul></li></ul><img alt=" " src="/docimg/作业等级.png"><p><code>[{&#x27;Name&#x27;:&#x27;特级&#x27;},{&#x27;Name&#x27;:&#x27;一级&#x27;},{&#x27;Name&#x27;:&#x27;二级&#x27;}]</code></p><ul><li><p>作业方式</p><ul><li>申请人申请时选择列表。</li></ul></li><li><p>作业方式补充</p><ul><li>申请人申请时可选择可输入列表。</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="设备交出单位风险识别"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#设备交出单位风险识别" title="Direct link to heading">#</a>设备交出单位风险识别</h3><ul><li>作业中所接触的物质<ul><li>作业票申请后审核人选择列表。</li></ul></li><li>作业中所接触的物质补充<ul><li>作业票申请后审核人可选择可输入列表。</li></ul></li><li>危害识别<ul><li>申请人申请时选择列表。</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="报警"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#报警" title="Direct link to heading">#</a>报警</h3><ul><li><p>此分组为报警参数设置，钛准定位系统会读取这些作业组属性。</p><ul><li><p>报警配置</p><ul><li><p>钛准系统所有报警的种类。如果值是<em>√</em>则代表启动此报警。</p><img alt=" " src="/docimg/报警种类.png"></li></ul></li></ul></li><li><p>领取物品，领取物品详情，设备</p><ul><li>这些属性是为动火装备的领取装备的，预想是这些物品也有定位卡牌。暂时没有实现。</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="报警参数"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#报警参数" title="Direct link to heading">#</a>报警参数</h3><ul><li><p>此分组为报警参数具体配置，钛准定位系统会读取这些作业组属性。</p><img alt=" " src="/docimg/报警具体设置.png"><img alt=" " src="/docimg/钛准系统报警.png"></li><li><p>作业暂停超时阈值</p><ul><li>默认值为60分钟，超过此时间，钛准系统会报警。</li></ul></li><li><p>火票许可证过期阈值</p><ul><li>默认值为480分钟，作业组创建后超过此时间，钛准系统会报警。</li></ul></li><li><p>未开始作业阈值</p><ul><li>默认值为120分钟，从作业组创建时间开始，此时间段内没有开始流程<em>安全作业</em>，钛准系统会报警提醒。</li></ul></li><li><p>超员</p><ul><li>默认值为3人0分钟，代表围栏范围只要超过3人，钛准系统会报警。</li></ul></li><li><p>静止关注人员</p><ul><li>指围栏范围内钛准系统关注静止不动的人员名单。</li></ul></li><li><p>静止时间阈值</p><ul><li>默认值为30分钟，静止关注人员的最大静止不动时间。</li></ul></li><li><p>离开关注人员</p><ul><li>离开围栏时报警人员名单。作业项脚本更新。<a href="#dhaqcs">详见作业规范-动火安全措施</a>。</li></ul></li><li><p>离开时间阈值</p><ul><li>默认值为10分钟，离开关注人员离开围栏的最大时间，超过钛准系统会报警。</li></ul></li><li><p>超员例外人员</p><ul><li>在围栏范围但不计算在超员名单的人员清单。</li></ul></li><li><p>越界例外人员</p><ul><li>可以随意进出围栏不会导致钛准系统报警的人员清单。</li></ul></li><li><span id="dzbj">多组报警</span>* 人员机具报警的依据，如下图只有一个Mac地址，但是要求数量为2，肯定会报警。<img alt=" " src="/docimg/多组报警.png"></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="审核"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#审核" title="Direct link to heading">#</a>审核</h3><ul><li><p>安全作业申请审核</p><ul><li><p>流程活动<em>作业申请审核</em>审核时填写。</p><img alt=" " src="/docimg/安全作业审核.png"></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="缺省分组"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#缺省分组" title="Direct link to heading">#</a>缺省分组</h3><ul><li><p>作业人员信息</p><ul><li><a href="#hyzyry">作业项脚本更新链接</a>。</li></ul></li><li><p>作业人员姓名</p><ul><li>无用，可以删除。</li></ul></li><li><p>检测结果</p><ul><li>主要作用是作为<strong>自定义服务</strong>是否创建作业组<em>气体检测作业</em>的依据。<a href="#zjcjg">作业项脚本更新链接</a>。</li></ul></li><li><p>buildId</p><ul><li>钛准定位系统中地图建筑的ID号。</li></ul></li><li><p>$DisplayTemplate</p><ul><li>作业组WORD视图的模板文件。</li></ul></li><li><p>$ValueOnNoExist</p><ul><li>形成模板文件时如果出现错误时显示的值。</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="演示"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#演示" title="Direct link to heading">#</a>演示</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="计划申请"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#计划申请" title="Direct link to heading">#</a>计划申请</h3><img alt=" " src="/docimg/计划申请.png"><ul><li>作业组创建后，在钛准定位系统也会对应显示.</li></ul><img alt=" " src="/docimg/钛准显示1.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="作业申请审核"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#作业申请审核" title="Direct link to heading">#</a>作业申请审核</h3><img alt=" " src="/docimg/申请审核.png"><img alt=" " src="/docimg/钛准显示2.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="落实安全措施-1"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#落实安全措施-1" title="Direct link to heading">#</a>落实安全措施</h3><ul><li>终端执行时，规定人员不在围栏范围会提示<em>请到达作业围栏范围内再执行作业。</em>。</li></ul><img alt=" " src="/docimg/钛准显示3.png"><img alt=" " src="/docimg/终端显示1.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="气体检测"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#气体检测" title="Direct link to heading">#</a>气体检测</h3><img alt=" " src="/docimg/终端显示2.png"><ul><li><p>检测合格后每半小时会创建一个气体检测作业组。</p><img alt=" " src="/docimg/计划气体检测.png"></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="审批签名-1"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#审批签名-1" title="Direct link to heading">#</a>审批签名</h3><ul><li><p>当领导在围栏范围之内后，就可以完成作业了。</p><img alt=" " src="/docimg/农主任地图.png"></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="安全作业"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#安全作业" title="Direct link to heading">#</a>安全作业</h3><ul><li><p>此时已经可以开始具体的动火作业了，报警也开始启动。</p><img alt=" " src="/docimg/钛准显示4.png"></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="报警-1"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#报警-1" title="Direct link to heading">#</a>报警</h3><ul><li><p>其中<em>人员机具不合格报警是由</em><a href="#dzbj">多组报警</a>决定的。</p><img alt=" " src="/docimg/钛准报警.png"></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="钛准定位系统查看作业组信息"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#钛准定位系统查看作业组信息" title="Direct link to heading">#</a>钛准定位系统查看作业组信息</h3><img alt=" " src="/docimg/钛准查看作业票.png"><img alt=" " src="/docimg/作业票详情.png"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="安全作业执行"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#安全作业执行" title="Direct link to heading">#</a>安全作业执行</h3><img alt=" " src="/docimg/暂停成功.png"><img alt=" " src="/docimg/钛准已完成.png"></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://www.rockwellautomation.com.cn/support.html/edit/master/versioned_docs\version-4.0.2\系统配置手册\模板详细说明\安全作业模板.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-02-18T11:23:19.000Z" class="docLastUpdatedAt_1sqk">2/18/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/系统配置手册/模板详细说明/设备管理模板"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« 设备管理模板</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/系统维护指南/运行监控和维护"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">运行监控和维护 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#流程" class="contents__link">流程</a></li><li><a href="#作业" class="contents__link">作业</a><ul><li><a href="#落实安全措施" class="contents__link">落实安全措施</a></li><li><a href="#检测人员检测" class="contents__link">检测人员检测</a></li><li><a href="#添加作业人员" class="contents__link">添加作业人员</a></li><li><a href="#运行监护人签名" class="contents__link">运行监护人签名</a></li><li><a href="#审批签名" class="contents__link">审批签名</a></li><li><a href="#特殊动火会签" class="contents__link">特殊动火会签</a></li><li><a href="#动火" class="contents__link">动火</a></li><li><a href="#验收" class="contents__link">验收</a></li></ul></li><li><a href="#作业规范" class="contents__link">作业规范</a><ul><li><a href="#动火安全措施" class="contents__link"><span id="dhaqcs">动火安全措施</span></a></li><li><a href="#单类气体分析检测" class="contents__link"><span id="qtjc">单类气体分析检测</span></a></li><li><a href="#作业人员" class="contents__link"><span id="zyry">作业人员</span></a></li><li><a href="#还有作业人员吗" class="contents__link"><span id="hyzyry">还有作业人员吗</span></a></li><li><a href="#安全作业规范" class="contents__link"><span id="dhzygf">安全作业规范</span></a></li><li><a href="#验收规范" class="contents__link"><span id="ysgf">验收规范</span></a></li></ul></li><li><a href="#作业组属性" class="contents__link">作业组属性</a><ul><li><a href="#基本信息" class="contents__link">基本信息</a></li><li><a href="#设备交出单位风险识别" class="contents__link">设备交出单位风险识别</a></li><li><a href="#报警" class="contents__link">报警</a></li><li><a href="#报警参数" class="contents__link">报警参数</a></li><li><a href="#审核" class="contents__link">审核</a></li><li><a href="#缺省分组" class="contents__link">缺省分组</a></li></ul></li><li><a href="#演示" class="contents__link">演示</a><ul><li><a href="#计划申请" class="contents__link">计划申请</a></li><li><a href="#作业申请审核" class="contents__link">作业申请审核</a></li><li><a href="#落实安全措施-1" class="contents__link">落实安全措施</a></li><li><a href="#气体检测" class="contents__link">气体检测</a></li><li><a href="#审批签名-1" class="contents__link">审批签名</a></li><li><a href="#安全作业" class="contents__link">安全作业</a></li><li><a href="#报警-1" class="contents__link">报警</a></li><li><a href="#钛准定位系统查看作业组信息" class="contents__link">钛准定位系统查看作业组信息</a></li><li><a href="#安全作业执行" class="contents__link">安全作业执行</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">文档</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/安装/系统要求">安装</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/用户使用手册/网页端/登录">用户使用手册</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/系统配置手册/授权管理/授权管理">系统配置手册</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/系统维护指南/运行监控和维护">系统维护指南</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/系统扩展指南/主页定制扩展开发">系统扩展指南</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://gitter.im/">Gitter</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://weibo.com/rockwellchina">微博</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://mp.weixin.qq.com/s/GjVBpx3pfqCPD2VqzC6L5Q">微信</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/company/rockwell-automation/">LinkedIn</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.rockwellautomation.com.cn/company/news/case-studies.html">客户故事</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.rockwellautomation.com.cn/company/about-us/">联系我们</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 罗克韦尔自动化 Built with Docusaurus.</div></div></div></footer>
</div>

<script src="/styles.e9064f25.js"></script>

<script src="/runtime~main.0d865bc6.js"></script>

<script src="/main.c2470f52.js"></script>

<script src="/1.1e5ad6df.js"></script>

<script src="/2.9c54e79d.js"></script>

<script src="/3.dce460c9.js"></script>

<script src="/1be78505.18c485a8.js"></script>

<script src="/20ac7829.6114259a.js"></script>

<script src="/17896441.96eb31fc.js"></script>

<script src="/aeabd683.52f805bd.js"></script>


</body>
</html>